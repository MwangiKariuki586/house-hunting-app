[{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(auth)\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(auth)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(auth)\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(auth)\\register\\page.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nD:\\Projects\\Personal\\house-hunting-app\\app\\(auth)\\register\\page.tsx:52:24\n  50 |   });\n  51 |\n> 52 |   const selectedRole = watch(\"role\");\n     |                        ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  53 |\n  54 |   const onSubmit = async (data: RegisterInput) => {\n  55 |     setError(\"\");","line":52,"column":24,"nodeType":null,"endLine":52,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Registration page for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { Eye, EyeOff, UserPlus, Home, Building2 } from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport { Input } from \"@/app/components/ui/input\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/app/components/ui/card\";\r\nimport { cn } from \"@/app/lib/utils\";\r\nimport { registerSchema, type RegisterInput } from \"@/app/lib/validations/auth\";\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const defaultRole =\r\n    searchParams.get(\"role\") === \"LANDLORD\" ? \"LANDLORD\" : \"TENANT\";\r\n\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = React.useState(false);\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    setValue,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm<RegisterInput>({\r\n    resolver: zodResolver(registerSchema),\r\n    defaultValues: {\r\n      role: defaultRole as \"TENANT\" | \"LANDLORD\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n    },\r\n  });\r\n\r\n  const selectedRole = watch(\"role\");\r\n\r\n  const onSubmit = async (data: RegisterInput) => {\r\n    setError(\"\");\r\n\r\n    try {\r\n      const res = await fetch(\"/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      const result = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(result.error || \"Registration failed\");\r\n        return;\r\n      }\r\n\r\n      // Redirect based on role\r\n      if (data.role === \"LANDLORD\") {\r\n        router.push(\"/dashboard/landlord/verification\");\r\n      } else {\r\n        router.push(\"/properties\");\r\n      }\r\n\r\n      router.refresh();\r\n    } catch {\r\n      setError(\"An unexpected error occurred\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"w-full max-w-md\">\r\n      <CardHeader className=\"text-center\">\r\n        <CardTitle className=\"text-2xl\">Create an account</CardTitle>\r\n        <CardDescription>\r\n          Join VerifiedNyumba and find your dream home\r\n        </CardDescription>\r\n      </CardHeader>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <CardContent className=\"space-y-4\">\r\n          {error && (\r\n            <div className=\"rounded-lg bg-red-50 p-3 text-sm text-red-600\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {/* Role Selection */}\r\n          <div>\r\n            <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n              I want to\r\n            </label>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setValue(\"role\", \"TENANT\")}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 rounded-lg border-2 p-4 transition-colors\",\r\n                  selectedRole === \"TENANT\"\r\n                    ? \"border-teal-600 bg-teal-50 text-teal-700\"\r\n                    : \"border-gray-200 hover:border-gray-300\"\r\n                )}\r\n              >\r\n                <Home className=\"h-6 w-6\" />\r\n                <span className=\"text-sm font-medium\">Find a home</span>\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setValue(\"role\", \"LANDLORD\")}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 rounded-lg border-2 p-4 transition-colors\",\r\n                  selectedRole === \"LANDLORD\"\r\n                    ? \"border-teal-600 bg-teal-50 text-teal-700\"\r\n                    : \"border-gray-200 hover:border-gray-300\"\r\n                )}\r\n              >\r\n                <Building2 className=\"h-6 w-6\" />\r\n                <span className=\"text-sm font-medium\">List property</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Name fields */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Input\r\n              label=\"First Name\"\r\n              placeholder=\"John\"\r\n              error={errors.firstName?.message}\r\n              {...register(\"firstName\")}\r\n            />\r\n            <Input\r\n              label=\"Last Name\"\r\n              placeholder=\"Doe\"\r\n              error={errors.lastName?.message}\r\n              {...register(\"lastName\")}\r\n            />\r\n          </div>\r\n\r\n          <Input\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            placeholder=\"you@example.com\"\r\n            error={errors.email?.message}\r\n            {...register(\"email\")}\r\n          />\r\n\r\n          <Input\r\n            label=\"Phone Number\"\r\n            type=\"tel\"\r\n            placeholder=\"0712345678\"\r\n            error={errors.phone?.message}\r\n            {...register(\"phone\")}\r\n          />\r\n\r\n          <div className=\"relative\">\r\n            <Input\r\n              label=\"Password\"\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              placeholder=\"Create a strong password\"\r\n              error={errors.password?.message}\r\n              {...register(\"password\")}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"absolute right-3 top-8 text-gray-500 hover:text-gray-700\"\r\n              onClick={() => setShowPassword(!showPassword)}\r\n            >\r\n              {showPassword ? (\r\n                <EyeOff className=\"h-4 w-4\" />\r\n              ) : (\r\n                <Eye className=\"h-4 w-4\" />\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <Input\r\n              label=\"Confirm Password\"\r\n              type={showConfirmPassword ? \"text\" : \"password\"}\r\n              placeholder=\"Confirm your password\"\r\n              error={errors.confirmPassword?.message}\r\n              {...register(\"confirmPassword\")}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"absolute right-3 top-8 text-gray-500 hover:text-gray-700\"\r\n              onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n            >\r\n              {showConfirmPassword ? (\r\n                <EyeOff className=\"h-4 w-4\" />\r\n              ) : (\r\n                <Eye className=\"h-4 w-4\" />\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          <p className=\"text-xs text-gray-500\">\r\n            By creating an account, you agree to our{\" \"}\r\n            <Link href=\"/terms\" className=\"text-teal-600 hover:underline\">\r\n              Terms of Service\r\n            </Link>{\" \"}\r\n            and{\" \"}\r\n            <Link href=\"/privacy\" className=\"text-teal-600 hover:underline\">\r\n              Privacy Policy\r\n            </Link>\r\n            .\r\n          </p>\r\n        </CardContent>\r\n\r\n        <CardFooter className=\"flex flex-col gap-4\">\r\n          <Button\r\n            type=\"submit\"\r\n            className=\"w-full gap-2\"\r\n            isLoading={isSubmitting}\r\n          >\r\n            <UserPlus className=\"h-4 w-4\" />\r\n            Create account\r\n          </Button>\r\n\r\n          <p className=\"text-center text-sm text-gray-600\">\r\n            Already have an account?{\" \"}\r\n            <Link\r\n              href=\"/login\"\r\n              className=\"font-medium text-teal-600 hover:text-teal-700\"\r\n            >\r\n              Sign in\r\n            </Link>\r\n          </p>\r\n        </CardFooter>\r\n      </form>\r\n    </Card>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\admin\\verification\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\bookings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatPrice' is defined but never used.","line":22,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Bookings page for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { Calendar, Clock, MapPin, Check, X, Loader2 } from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport { Badge } from \"@/app/components/ui/badge\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/app/components/ui/card\";\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"@/app/components/ui/tabs\";\r\nimport { formatDate, formatPrice } from \"@/app/lib/utils\";\r\n\r\ninterface Booking {\r\n  id: string;\r\n  date: string;\r\n  status: \"PENDING\" | \"CONFIRMED\" | \"CANCELLED\" | \"COMPLETED\" | \"NO_SHOW\";\r\n  notes: string | null;\r\n  tenant: {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    phone: string;\r\n  };\r\n  slot: {\r\n    startTime: string;\r\n    endTime: string;\r\n    listing: {\r\n      id: string;\r\n      title: string;\r\n      area: string;\r\n      landlordId: string;\r\n      landlord: {\r\n        id: string;\r\n        firstName: string;\r\n        lastName: string;\r\n        phone: string;\r\n      };\r\n      photos: { url: string }[];\r\n    };\r\n  };\r\n}\r\n\r\nconst dayNames = [\r\n  \"Sunday\",\r\n  \"Monday\",\r\n  \"Tuesday\",\r\n  \"Wednesday\",\r\n  \"Thursday\",\r\n  \"Friday\",\r\n  \"Saturday\",\r\n];\r\n\r\nexport default function BookingsPage() {\r\n  const [bookings, setBookings] = React.useState<Booking[]>([]);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [currentUserId, setCurrentUserId] = React.useState<string | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [bookingsRes, userRes] = await Promise.all([\r\n          fetch(\"/api/bookings\"),\r\n          fetch(\"/api/auth/me\"),\r\n        ]);\r\n\r\n        if (bookingsRes.ok) {\r\n          const data = await bookingsRes.json();\r\n          setBookings(data.bookings);\r\n        }\r\n\r\n        if (userRes.ok) {\r\n          const userData = await userRes.json();\r\n          setCurrentUserId(userData.user.id);\r\n        }\r\n      } catch {\r\n        console.error(\"Failed to fetch data\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const updateBookingStatus = async (id: string, status: string) => {\r\n    try {\r\n      const res = await fetch(`/api/bookings/${id}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ status }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setBookings((prev) =>\r\n          prev.map((b) =>\r\n            b.id === id ? { ...b, status: status as Booking[\"status\"] } : b\r\n          )\r\n        );\r\n      }\r\n    } catch {\r\n      console.error(\"Failed to update booking\");\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case \"PENDING\":\r\n        return <Badge variant=\"warning\">Pending</Badge>;\r\n      case \"CONFIRMED\":\r\n        return <Badge variant=\"success\">Confirmed</Badge>;\r\n      case \"CANCELLED\":\r\n        return <Badge variant=\"destructive\">Cancelled</Badge>;\r\n      case \"COMPLETED\":\r\n        return <Badge variant=\"secondary\">Completed</Badge>;\r\n      case \"NO_SHOW\":\r\n        return <Badge variant=\"outline\">No Show</Badge>;\r\n      default:\r\n        return <Badge>{status}</Badge>;\r\n    }\r\n  };\r\n\r\n  const upcomingBookings = bookings.filter(\r\n    (b) =>\r\n      [\"PENDING\", \"CONFIRMED\"].includes(b.status) &&\r\n      new Date(b.date) >= new Date()\r\n  );\r\n  const pastBookings = bookings.filter(\r\n    (b) =>\r\n      ![\"PENDING\", \"CONFIRMED\"].includes(b.status) ||\r\n      new Date(b.date) < new Date()\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-20\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-teal-600\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const BookingCard = ({ booking }: { booking: Booking }) => {\r\n    const isLandlord = booking.slot.listing.landlordId === currentUserId;\r\n    const otherPerson = isLandlord\r\n      ? booking.tenant\r\n      : booking.slot.listing.landlord;\r\n\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex gap-4\">\r\n            {/* Property Image */}\r\n            <div className=\"relative h-20 w-28 shrink-0 overflow-hidden rounded-lg\">\r\n              {booking.slot.listing.photos[0] ? (\r\n                <Image\r\n                  src={booking.slot.listing.photos[0].url}\r\n                  alt={booking.slot.listing.title}\r\n                  fill\r\n                  className=\"object-cover\"\r\n                />\r\n              ) : (\r\n                <div className=\"flex h-full items-center justify-center bg-gray-100\">\r\n                  <span className=\"text-xs text-gray-400\">No image</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Details */}\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"flex items-start justify-between gap-2\">\r\n                <Link\r\n                  href={`/properties/${booking.slot.listing.id}`}\r\n                  className=\"font-semibold text-gray-900 hover:text-teal-600 line-clamp-1\"\r\n                >\r\n                  {booking.slot.listing.title}\r\n                </Link>\r\n                {getStatusBadge(booking.status)}\r\n              </div>\r\n\r\n              <div className=\"mt-1 flex items-center gap-4 text-sm text-gray-500\">\r\n                <span className=\"flex items-center gap-1\">\r\n                  <MapPin className=\"h-3 w-3\" />\r\n                  {booking.slot.listing.area}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"mt-2 flex items-center gap-4 text-sm\">\r\n                <span className=\"flex items-center gap-1 text-gray-700\">\r\n                  <Calendar className=\"h-4 w-4 text-teal-600\" />\r\n                  {dayNames[new Date(booking.date).getDay()]},{\" \"}\r\n                  {formatDate(booking.date)}\r\n                </span>\r\n                <span className=\"flex items-center gap-1 text-gray-700\">\r\n                  <Clock className=\"h-4 w-4 text-teal-600\" />\r\n                  {booking.slot.startTime} - {booking.slot.endTime}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"mt-2 text-sm text-gray-600\">\r\n                {isLandlord ? \"Visitor\" : \"Landlord\"}: {otherPerson.firstName}{\" \"}\r\n                {otherPerson.lastName}\r\n                {booking.status === \"CONFIRMED\" && (\r\n                  <span className=\"ml-2 text-teal-600\">\r\n                    ΓÇó {otherPerson.phone}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions for landlord */}\r\n          {isLandlord && booking.status === \"PENDING\" && (\r\n            <div className=\"mt-4 flex gap-2 border-t pt-4\">\r\n              <Button\r\n                size=\"sm\"\r\n                onClick={() => updateBookingStatus(booking.id, \"CONFIRMED\")}\r\n                className=\"gap-1\"\r\n              >\r\n                <Check className=\"h-4 w-4\" />\r\n                Confirm\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => updateBookingStatus(booking.id, \"CANCELLED\")}\r\n                className=\"gap-1\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n                Decline\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Cancel option for tenant */}\r\n          {!isLandlord && booking.status === \"PENDING\" && (\r\n            <div className=\"mt-4 border-t pt-4\">\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => updateBookingStatus(booking.id, \"CANCELLED\")}\r\n              >\r\n                Cancel Booking\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Viewing Bookings</h1>\r\n        <p className=\"mt-1 text-gray-600\">\r\n          Manage your property viewing appointments\r\n        </p>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"upcoming\">\r\n        <TabsList className=\"mb-6\">\r\n          <TabsTrigger value=\"upcoming\">\r\n            Upcoming ({upcomingBookings.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"past\">Past ({pastBookings.length})</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"upcoming\">\r\n          {upcomingBookings.length === 0 ? (\r\n            <Card>\r\n              <CardContent className=\"flex flex-col items-center py-12 text-center\">\r\n                <Calendar className=\"mb-4 h-12 w-12 text-gray-400\" />\r\n                <p className=\"text-lg font-medium text-gray-900\">\r\n                  No upcoming viewings\r\n                </p>\r\n                <p className=\"mt-2 text-gray-600\">\r\n                  Book a viewing on a property to see it here\r\n                </p>\r\n                <Link href=\"/properties\">\r\n                  <Button className=\"mt-4\">Browse Properties</Button>\r\n                </Link>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {upcomingBookings.map((booking) => (\r\n                <BookingCard key={booking.id} booking={booking} />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"past\">\r\n          {pastBookings.length === 0 ? (\r\n            <Card>\r\n              <CardContent className=\"py-12 text-center\">\r\n                <p className=\"text-gray-500\">No past viewings</p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {pastBookings.map((booking) => (\r\n                <BookingCard key={booking.id} booking={booking} />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\chats\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":15,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Chat conversation page for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { Send, Phone, ArrowLeft, BadgeCheck, Loader2, Eye } from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport {\r\n  Avatar,\r\n  AvatarFallback,\r\n  AvatarImage,\r\n} from \"@/app/components/ui/avatar\";\r\nimport { Badge } from \"@/app/components/ui/badge\";\r\nimport {\r\n  cn,\r\n  formatPrice,\r\n  formatRelativeTime,\r\n  getInitials,\r\n} from \"@/app/lib/utils\";\r\n\r\n// Pre-filled question templates\r\nconst preFilledQuestions = [\r\n  \"Is this property still available?\",\r\n  \"Is the rent negotiable?\",\r\n  \"When can I schedule a viewing?\",\r\n  \"What are the move-in requirements?\",\r\n  \"Is water/electricity included?\",\r\n];\r\n\r\ninterface Message {\r\n  id: string;\r\n  content: string;\r\n  senderId: string;\r\n  isPreFilled: boolean;\r\n  readAt: string | null;\r\n  createdAt: string;\r\n  sender: {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    avatar: string | null;\r\n  };\r\n}\r\n\r\ninterface ConversationData {\r\n  id: string;\r\n  otherUser: {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    avatar: string | null;\r\n    phone: string | null;\r\n    verificationStatus?: string;\r\n  };\r\n  listing: {\r\n    id: string;\r\n    title: string;\r\n    area: string;\r\n    monthlyRent: number;\r\n    photos: { url: string }[];\r\n  };\r\n  messages: Message[];\r\n  phoneRevealed: boolean;\r\n  otherPhoneRevealed: boolean;\r\n  isTenant: boolean;\r\n}\r\n\r\nexport default function ChatConversationPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const id = params.id as string;\r\n  const messagesEndRef = React.useRef<HTMLDivElement>(null);\r\n\r\n  const [conversation, setConversation] =\r\n    React.useState<ConversationData | null>(null);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [newMessage, setNewMessage] = React.useState(\"\");\r\n  const [isSending, setIsSending] = React.useState(false);\r\n  const [currentUserId, setCurrentUserId] = React.useState<string | null>(null);\r\n\r\n  // Fetch current user\r\n  React.useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/auth/me\");\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setCurrentUserId(data.user.id);\r\n        }\r\n      } catch {\r\n        console.error(\"Failed to fetch user\");\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  // Fetch conversation\r\n  React.useEffect(() => {\r\n    const fetchConversation = async () => {\r\n      try {\r\n        const res = await fetch(`/api/chat/${id}`);\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setConversation(data.conversation);\r\n        } else if (res.status === 404) {\r\n          router.push(\"/dashboard/chats\");\r\n        }\r\n      } catch {\r\n        console.error(\"Failed to fetch conversation\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchConversation();\r\n  }, [id, router]);\r\n\r\n  // Scroll to bottom when messages change\r\n  React.useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [conversation?.messages]);\r\n\r\n  // Poll for new messages (will be replaced with WebSocket)\r\n  React.useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const res = await fetch(`/api/chat/${id}`);\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setConversation(data.conversation);\r\n        }\r\n      } catch {\r\n        // Ignore polling errors\r\n      }\r\n    }, 5000); // Poll every 5 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [id]);\r\n\r\n  const sendMessage = async (content: string, isPreFilled = false) => {\r\n    if (!content.trim() || isSending) return;\r\n\r\n    setIsSending(true);\r\n    setNewMessage(\"\");\r\n\r\n    try {\r\n      const res = await fetch(`/api/chat/${id}/messages`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ content, isPreFilled }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setConversation((prev) => {\r\n          if (!prev) return null;\r\n          return {\r\n            ...prev,\r\n            messages: [...prev.messages, data.message],\r\n          };\r\n        });\r\n      }\r\n    } catch {\r\n      console.error(\"Failed to send message\");\r\n      setNewMessage(content);\r\n    } finally {\r\n      setIsSending(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    sendMessage(newMessage);\r\n  };\r\n\r\n  const revealPhone = async () => {\r\n    if (!confirm(\"Are you sure you want to share your phone number?\")) return;\r\n\r\n    try {\r\n      const res = await fetch(`/api/chat/${id}/reveal`, {\r\n        method: \"POST\",\r\n      });\r\n\r\n      if (res.ok) {\r\n        setConversation((prev) => {\r\n          if (!prev) return null;\r\n          return { ...prev, phoneRevealed: true };\r\n        });\r\n      }\r\n    } catch {\r\n      console.error(\"Failed to reveal phone\");\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-20\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-teal-600\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!conversation) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-[calc(100vh-12rem)] flex-col\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-4 border-b pb-4\">\r\n        <Link href=\"/dashboard/chats\">\r\n          <Button variant=\"ghost\" size=\"icon\">\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </Button>\r\n        </Link>\r\n\r\n        <Avatar className=\"h-10 w-10\">\r\n          <AvatarImage src={conversation.otherUser.avatar || undefined} />\r\n          <AvatarFallback>\r\n            {getInitials(\r\n              conversation.otherUser.firstName,\r\n              conversation.otherUser.lastName\r\n            )}\r\n          </AvatarFallback>\r\n        </Avatar>\r\n\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"font-semibold text-gray-900\">\r\n              {conversation.otherUser.firstName}{\" \"}\r\n              {conversation.otherUser.lastName}\r\n            </span>\r\n            {conversation.otherUser.verificationStatus === \"VERIFIED\" && (\r\n              <BadgeCheck className=\"h-4 w-4 text-teal-600\" />\r\n            )}\r\n          </div>\r\n          <p className=\"text-sm text-gray-500 truncate\">\r\n            {conversation.listing.title}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Phone reveal button */}\r\n        {conversation.otherPhoneRevealed && conversation.otherUser.phone ? (\r\n          <a\r\n            href={`tel:${conversation.otherUser.phone}`}\r\n            className=\"flex items-center gap-2 rounded-full bg-teal-100 px-4 py-2 text-sm font-medium text-teal-700\"\r\n          >\r\n            <Phone className=\"h-4 w-4\" />\r\n            {conversation.otherUser.phone}\r\n          </a>\r\n        ) : (\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={revealPhone}\r\n            disabled={conversation.phoneRevealed}\r\n          >\r\n            {conversation.phoneRevealed ? \"Phone Shared\" : \"Share Phone\"}\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Listing Info Banner */}\r\n      <Link\r\n        href={`/properties/${conversation.listing.id}`}\r\n        className=\"flex items-center gap-3 border-b bg-gray-50 p-3 hover:bg-gray-100 transition-colors\"\r\n      >\r\n        {conversation.listing.photos[0] && (\r\n          <div className=\"relative h-12 w-16 overflow-hidden rounded\">\r\n            <Image\r\n              src={conversation.listing.photos[0].url}\r\n              alt={conversation.listing.title}\r\n              fill\r\n              className=\"object-cover\"\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"flex-1 min-w-0\">\r\n          <p className=\"font-medium text-gray-900 truncate\">\r\n            {conversation.listing.title}\r\n          </p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            {conversation.listing.area} ΓÇó{\" \"}\r\n            {formatPrice(conversation.listing.monthlyRent)}/mo\r\n          </p>\r\n        </div>\r\n        <Eye className=\"h-4 w-4 text-gray-400\" />\r\n      </Link>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {conversation.messages.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <p className=\"text-gray-500\">\r\n              No messages yet. Start the conversation!\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          conversation.messages.map((message) => {\r\n            const isOwn = message.senderId === currentUserId;\r\n\r\n            return (\r\n              <div\r\n                key={message.id}\r\n                className={cn(\"flex\", isOwn ? \"justify-end\" : \"justify-start\")}\r\n              >\r\n                <div\r\n                  className={cn(\r\n                    \"max-w-[70%] rounded-2xl px-4 py-2\",\r\n                    isOwn\r\n                      ? \"bg-teal-600 text-white rounded-br-md\"\r\n                      : \"bg-gray-100 text-gray-900 rounded-bl-md\"\r\n                  )}\r\n                >\r\n                  <p>{message.content}</p>\r\n                  <p\r\n                    className={cn(\r\n                      \"mt-1 text-xs\",\r\n                      isOwn ? \"text-teal-100\" : \"text-gray-500\"\r\n                    )}\r\n                  >\r\n                    {formatRelativeTime(message.createdAt)}\r\n                    {isOwn && message.readAt && \" ΓÇó Read\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Pre-filled Questions */}\r\n      {conversation.messages.length < 3 && (\r\n        <div className=\"border-t p-3\">\r\n          <p className=\"mb-2 text-xs font-medium text-gray-500\">\r\n            Quick questions:\r\n          </p>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {preFilledQuestions.map((question) => (\r\n              <button\r\n                key={question}\r\n                onClick={() => sendMessage(question, true)}\r\n                className=\"rounded-full bg-gray-100 px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-200 transition-colors\"\r\n                disabled={isSending}\r\n              >\r\n                {question}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Message Input */}\r\n      <form onSubmit={handleSubmit} className=\"border-t p-4\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder=\"Type a message...\"\r\n            className=\"flex-1 rounded-full border border-gray-300 px-4 py-2 focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20\"\r\n            disabled={isSending}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            size=\"icon\"\r\n            className=\"rounded-full\"\r\n            disabled={!newMessage.trim() || isSending}\r\n          >\r\n            {isSending ? (\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <Send className=\"h-4 w-4\" />\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\chats\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\landlord\\analytics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\landlord\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'zodResolver' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreateListingInput' is defined but never used.","line":46,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":26},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":903,"column":25,"nodeType":"JSXOpeningElement","endLine":907,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Create Listing page for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport {\r\n  Upload,\r\n  X,\r\n  Loader2,\r\n  MapPin,\r\n  Home,\r\n  DollarSign,\r\n  Settings2,\r\n  ImagePlus,\r\n  Check,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport { Input } from \"@/app/components/ui/input\";\r\nimport { Textarea } from \"@/app/components/ui/textarea\";\r\nimport { Checkbox } from \"@/app/components/ui/checkbox\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/app/components/ui/select\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/app/components/ui/card\";\r\nimport {\r\n  cn,\r\n  propertyTypeLabels,\r\n  buildingTypeLabels,\r\n  waterTypeLabels,\r\n  electricityTypeLabels,\r\n} from \"@/app/lib/utils\";\r\nimport {\r\n  createListingSchema,\r\n  type CreateListingInput,\r\n  kenyanAreas,\r\n  amenitiesList,\r\n} from \"@/app/lib/validations/listing\";\r\n\r\ntype Step = \"basics\" | \"location\" | \"pricing\" | \"features\" | \"photos\";\r\n\r\nconst steps: { id: Step; label: string; icon: React.ReactNode }[] = [\r\n  { id: \"basics\", label: \"Basic Info\", icon: <Home className=\"h-4 w-4\" /> },\r\n  { id: \"location\", label: \"Location\", icon: <MapPin className=\"h-4 w-4\" /> },\r\n  { id: \"pricing\", label: \"Pricing\", icon: <DollarSign className=\"h-4 w-4\" /> },\r\n  {\r\n    id: \"features\",\r\n    label: \"Features\",\r\n    icon: <Settings2 className=\"h-4 w-4\" />,\r\n  },\r\n  { id: \"photos\", label: \"Photos\", icon: <ImagePlus className=\"h-4 w-4\" /> },\r\n];\r\n\r\ninterface UploadedPhoto {\r\n  url: string;\r\n  publicId: string;\r\n  isMain: boolean;\r\n}\r\n\r\nexport default function CreateListingPage() {\r\n  const router = useRouter();\r\n  const [currentStep, setCurrentStep] = React.useState<Step>(\"basics\");\r\n  const [error, setError] = React.useState(\"\");\r\n  const [photos, setPhotos] = React.useState<UploadedPhoto[]>([]);\r\n  const [uploadingPhoto, setUploadingPhoto] = React.useState(false);\r\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\r\n\r\n  type FormData = {\r\n    title: string;\r\n    description: string;\r\n    area: string;\r\n    estate: string;\r\n    landmark: string;\r\n    address: string;\r\n    distanceToCBD: number | undefined;\r\n    distanceToStage: number | undefined;\r\n    propertyType: string;\r\n    buildingType: string;\r\n    bedrooms: number;\r\n    bathrooms: number;\r\n    monthlyRent: number;\r\n    deposit: number;\r\n    serviceCharge: number;\r\n    waterCharge: number;\r\n    garbageCharge: number;\r\n    waterType: string;\r\n    electricityType: string;\r\n    parking: boolean;\r\n    parkingSpaces: number;\r\n    petsAllowed: boolean;\r\n    familyFriendly: boolean;\r\n    bachelorFriendly: boolean;\r\n    gatedCommunity: boolean;\r\n    furnished: boolean;\r\n    amenities: string[];\r\n    dailyRentAvailable: boolean;\r\n    weeklyRentAvailable: boolean;\r\n    dailyRent: number | undefined;\r\n    weeklyRent: number | undefined;\r\n  };\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    setValue,\r\n    formState: { errors },\r\n  } = useForm<FormData>({\r\n    defaultValues: {\r\n      title: \"\",\r\n      description: \"\",\r\n      area: \"\",\r\n      estate: \"\",\r\n      landmark: \"\",\r\n      address: \"\",\r\n      distanceToCBD: undefined,\r\n      distanceToStage: undefined,\r\n      propertyType: \"ONE_BEDROOM\",\r\n      buildingType: \"APARTMENT\",\r\n      bedrooms: 1,\r\n      bathrooms: 1,\r\n      monthlyRent: 0,\r\n      deposit: 0,\r\n      serviceCharge: 0,\r\n      waterCharge: 0,\r\n      garbageCharge: 0,\r\n      waterType: \"COUNCIL\",\r\n      electricityType: \"TOKEN\",\r\n      parking: false,\r\n      parkingSpaces: 0,\r\n      petsAllowed: false,\r\n      familyFriendly: true,\r\n      bachelorFriendly: true,\r\n      gatedCommunity: false,\r\n      furnished: false,\r\n      amenities: [],\r\n      dailyRentAvailable: false,\r\n      weeklyRentAvailable: false,\r\n      dailyRent: undefined,\r\n      weeklyRent: undefined,\r\n    },\r\n  });\r\n\r\n  const selectedAmenities = watch(\"amenities\") || [];\r\n\r\n  const toggleAmenity = (amenity: string) => {\r\n    const current = selectedAmenities;\r\n    if (current.includes(amenity)) {\r\n      setValue(\r\n        \"amenities\",\r\n        current.filter((a) => a !== amenity)\r\n      );\r\n    } else {\r\n      setValue(\"amenities\", [...current, amenity]);\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = async (files: FileList | null) => {\r\n    if (!files || files.length === 0) return;\r\n\r\n    const maxPhotos = 10;\r\n    if (photos.length + files.length > maxPhotos) {\r\n      setError(`Maximum ${maxPhotos} photos allowed`);\r\n      return;\r\n    }\r\n\r\n    setUploadingPhoto(true);\r\n    setError(\"\");\r\n\r\n    for (const file of Array.from(files)) {\r\n      // Validate file\r\n      const maxSize = 10 * 1024 * 1024; // 10MB\r\n      if (file.size > maxSize) {\r\n        setError(\"Each photo must be less than 10MB\");\r\n        continue;\r\n      }\r\n\r\n      const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/webp\"];\r\n      if (!allowedTypes.includes(file.type)) {\r\n        setError(\"Only JPG, PNG, and WebP images are allowed\");\r\n        continue;\r\n      }\r\n\r\n      try {\r\n        // Convert to base64\r\n        const reader = new FileReader();\r\n        const base64 = await new Promise<string>((resolve) => {\r\n          reader.onload = () => resolve(reader.result as string);\r\n          reader.readAsDataURL(file);\r\n        });\r\n\r\n        const res = await fetch(\"/api/listings/photos\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ file: base64 }),\r\n        });\r\n\r\n        if (!res.ok) {\r\n          const data = await res.json();\r\n          setError(data.error || \"Upload failed\");\r\n          continue;\r\n        }\r\n\r\n        const data = await res.json();\r\n        setPhotos((prev) => [\r\n          ...prev,\r\n          {\r\n            url: data.url,\r\n            publicId: data.publicId,\r\n            isMain: prev.length === 0, // First photo is main\r\n          },\r\n        ]);\r\n      } catch {\r\n        setError(\"Photo upload failed\");\r\n      }\r\n    }\r\n\r\n    setUploadingPhoto(false);\r\n  };\r\n\r\n  const removePhoto = async (publicId: string) => {\r\n    try {\r\n      await fetch(\"/api/listings/photos\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ publicId }),\r\n      });\r\n\r\n      setPhotos((prev) => {\r\n        const filtered = prev.filter((p) => p.publicId !== publicId);\r\n        // If we removed the main photo, make the first one main\r\n        if (filtered.length > 0 && !filtered.some((p) => p.isMain)) {\r\n          filtered[0].isMain = true;\r\n        }\r\n        return filtered;\r\n      });\r\n    } catch {\r\n      setError(\"Failed to remove photo\");\r\n    }\r\n  };\r\n\r\n  const setMainPhoto = (publicId: string) => {\r\n    setPhotos((prev) =>\r\n      prev.map((p) => ({\r\n        ...p,\r\n        isMain: p.publicId === publicId,\r\n      }))\r\n    );\r\n  };\r\n\r\n  const validateStep = async (step: Step): Promise<boolean> => {\r\n    switch (step) {\r\n      case \"basics\": {\r\n        const title = watch(\"title\");\r\n        const description = watch(\"description\");\r\n        if (!title || title.length < 10) {\r\n          setError(\"Title must be at least 10 characters\");\r\n          return false;\r\n        }\r\n        if (!description || description.length < 50) {\r\n          setError(\"Description must be at least 50 characters\");\r\n          return false;\r\n        }\r\n        setError(\"\");\r\n        return true;\r\n      }\r\n      case \"location\": {\r\n        const area = watch(\"area\");\r\n        if (!area) {\r\n          setError(\"Please select an area\");\r\n          return false;\r\n        }\r\n        setError(\"\");\r\n        return true;\r\n      }\r\n      case \"pricing\": {\r\n        const monthlyRent = watch(\"monthlyRent\");\r\n        if (!monthlyRent || monthlyRent < 1000) {\r\n          setError(\"Monthly rent must be at least KES 1,000\");\r\n          return false;\r\n        }\r\n        setError(\"\");\r\n        return true;\r\n      }\r\n      case \"features\":\r\n        return true;\r\n      case \"photos\":\r\n        if (photos.length < 3) {\r\n          setError(\"Please upload at least 3 photos\");\r\n          return false;\r\n        }\r\n        setError(\"\");\r\n        return true;\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const nextStep = async () => {\r\n    const isValid = await validateStep(currentStep);\r\n    if (!isValid) return;\r\n\r\n    const stepIndex = steps.findIndex((s) => s.id === currentStep);\r\n    if (stepIndex < steps.length - 1) {\r\n      setCurrentStep(steps[stepIndex + 1].id);\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    const stepIndex = steps.findIndex((s) => s.id === currentStep);\r\n    if (stepIndex > 0) {\r\n      setCurrentStep(steps[stepIndex - 1].id);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    if (photos.length < 3) {\r\n      setError(\"Please upload at least 3 photos\");\r\n      return;\r\n    }\r\n\r\n    // Validate with zod\r\n    const validationResult = createListingSchema.safeParse(data);\r\n    if (!validationResult.success) {\r\n      setError(\"Please fill in all required fields correctly\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const res = await fetch(\"/api/listings\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...validationResult.data,\r\n          photos,\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const result = await res.json();\r\n        setError(result.error || \"Failed to create listing\");\r\n        return;\r\n      }\r\n\r\n      const result = await res.json();\r\n      router.push(`/properties/${result.listing.id}`);\r\n    } catch {\r\n      setError(\"An unexpected error occurred\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const currentStepIndex = steps.findIndex((s) => s.id === currentStep);\r\n\r\n  return (\r\n    <div className=\"mx-auto max-w-3xl\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Create New Listing</h1>\r\n        <p className=\"mt-2 text-gray-600\">\r\n          Fill in the details about your property. All information is required\r\n          for transparency.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Step Indicator */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {steps.map((step, index) => (\r\n            <React.Fragment key={step.id}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() =>\r\n                  index <= currentStepIndex && setCurrentStep(step.id)\r\n                }\r\n                className={cn(\r\n                  \"flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium transition-colors\",\r\n                  currentStep === step.id\r\n                    ? \"bg-teal-600 text-white\"\r\n                    : index < currentStepIndex\r\n                    ? \"bg-teal-100 text-teal-700\"\r\n                    : \"bg-gray-100 text-gray-500\"\r\n                )}\r\n                disabled={index > currentStepIndex}\r\n              >\r\n                {index < currentStepIndex ? (\r\n                  <Check className=\"h-4 w-4\" />\r\n                ) : (\r\n                  step.icon\r\n                )}\r\n                <span className=\"hidden sm:inline\">{step.label}</span>\r\n              </button>\r\n              {index < steps.length - 1 && (\r\n                <div\r\n                  className={cn(\r\n                    \"h-0.5 flex-1 mx-2\",\r\n                    index < currentStepIndex ? \"bg-teal-600\" : \"bg-gray-200\"\r\n                  )}\r\n                />\r\n              )}\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-6 rounded-lg bg-red-50 p-4 text-sm text-red-600\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        {/* Step 1: Basic Info */}\r\n        {currentStep === \"basics\" && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Basic Information</CardTitle>\r\n              <CardDescription>Tell us about your property</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <Input\r\n                label=\"Listing Title\"\r\n                placeholder=\"e.g., Spacious 2BR Apartment in Kilimani\"\r\n                error={errors.title?.message}\r\n                {...register(\"title\")}\r\n              />\r\n\r\n              <Textarea\r\n                label=\"Description\"\r\n                placeholder=\"Describe your property in detail. Include features, nearby amenities, and what makes it special...\"\r\n                error={errors.description?.message}\r\n                {...register(\"description\")}\r\n                className=\"min-h-[150px]\"\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"mb-1.5 block text-sm font-medium text-gray-700\">\r\n                    Property Type\r\n                  </label>\r\n                  <Select\r\n                    value={watch(\"propertyType\")}\r\n                    onValueChange={(value) => setValue(\"propertyType\", value)}\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {Object.entries(propertyTypeLabels).map(\r\n                        ([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        )\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"mb-1.5 block text-sm font-medium text-gray-700\">\r\n                    Building Type\r\n                  </label>\r\n                  <Select\r\n                    value={watch(\"buildingType\")}\r\n                    onValueChange={(value) => setValue(\"buildingType\", value)}\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {Object.entries(buildingTypeLabels).map(\r\n                        ([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        )\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Bedrooms\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  max={10}\r\n                  error={errors.bedrooms?.message}\r\n                  {...register(\"bedrooms\", { valueAsNumber: true })}\r\n                />\r\n                <Input\r\n                  label=\"Bathrooms\"\r\n                  type=\"number\"\r\n                  min={1}\r\n                  max={10}\r\n                  error={errors.bathrooms?.message}\r\n                  {...register(\"bathrooms\", { valueAsNumber: true })}\r\n                />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Step 2: Location */}\r\n        {currentStep === \"location\" && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Location Details</CardTitle>\r\n              <CardDescription>Help tenants find your property</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"mb-1.5 block text-sm font-medium text-gray-700\">\r\n                  Area / Neighborhood *\r\n                </label>\r\n                <Select\r\n                  value={watch(\"area\")}\r\n                  onValueChange={(value) => setValue(\"area\", value)}\r\n                >\r\n                  <SelectTrigger error={errors.area?.message}>\r\n                    <SelectValue placeholder=\"Select area\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {kenyanAreas.map((area) => (\r\n                      <SelectItem key={area} value={area}>\r\n                        {area}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <Input\r\n                label=\"Estate / Building Name\"\r\n                placeholder=\"e.g., Greatwall Gardens, Phase 2\"\r\n                {...register(\"estate\")}\r\n              />\r\n\r\n              <Input\r\n                label=\"Landmark\"\r\n                placeholder=\"e.g., Near Yaya Centre, 5 min walk from the stage\"\r\n                {...register(\"landmark\")}\r\n              />\r\n\r\n              <Input\r\n                label=\"Full Address (Optional)\"\r\n                placeholder=\"Plot number, road name\"\r\n                {...register(\"address\")}\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Distance to CBD (km)\"\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  min={0}\r\n                  placeholder=\"e.g., 8.5\"\r\n                  {...register(\"distanceToCBD\", { valueAsNumber: true })}\r\n                />\r\n                <Input\r\n                  label=\"Distance to Stage (km)\"\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  min={0}\r\n                  placeholder=\"e.g., 0.3\"\r\n                  {...register(\"distanceToStage\", { valueAsNumber: true })}\r\n                />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Step 3: Pricing */}\r\n        {currentStep === \"pricing\" && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Pricing Details</CardTitle>\r\n              <CardDescription>\r\n                Be transparent about all costs - no surprises!\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Monthly Rent (KES) *\"\r\n                  type=\"number\"\r\n                  min={1000}\r\n                  placeholder=\"e.g., 25000\"\r\n                  error={errors.monthlyRent?.message}\r\n                  {...register(\"monthlyRent\", { valueAsNumber: true })}\r\n                />\r\n                <Input\r\n                  label=\"Deposit (KES) *\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  placeholder=\"e.g., 25000\"\r\n                  error={errors.deposit?.message}\r\n                  {...register(\"deposit\", { valueAsNumber: true })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <Input\r\n                  label=\"Service Charge (KES)\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  placeholder=\"0\"\r\n                  {...register(\"serviceCharge\", { valueAsNumber: true })}\r\n                />\r\n                <Input\r\n                  label=\"Water Charge (KES)\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  placeholder=\"0\"\r\n                  {...register(\"waterCharge\", { valueAsNumber: true })}\r\n                />\r\n                <Input\r\n                  label=\"Garbage Charge (KES)\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  placeholder=\"0\"\r\n                  {...register(\"garbageCharge\", { valueAsNumber: true })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"rounded-lg bg-teal-50 p-4\">\r\n                <p className=\"text-sm font-medium text-teal-800\">\r\n                  Total Move-in Cost:{\" \"}\r\n                  <span className=\"text-lg\">\r\n                    KES{\" \"}\r\n                    {(\r\n                      (watch(\"monthlyRent\") || 0) +\r\n                      (watch(\"deposit\") || 0) +\r\n                      (watch(\"serviceCharge\") || 0) +\r\n                      (watch(\"waterCharge\") || 0) +\r\n                      (watch(\"garbageCharge\") || 0)\r\n                    ).toLocaleString()}\r\n                  </span>\r\n                </p>\r\n                <p className=\"mt-1 text-xs text-teal-600\">\r\n                  This is what tenants will see as the total cost to move in\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <Checkbox\r\n                  label=\"Daily rent available\"\r\n                  checked={watch(\"dailyRentAvailable\")}\r\n                  onCheckedChange={(checked) =>\r\n                    setValue(\"dailyRentAvailable\", !!checked)\r\n                  }\r\n                />\r\n                {watch(\"dailyRentAvailable\") && (\r\n                  <Input\r\n                    label=\"Daily Rent (KES)\"\r\n                    type=\"number\"\r\n                    min={0}\r\n                    placeholder=\"e.g., 1500\"\r\n                    {...register(\"dailyRent\", { valueAsNumber: true })}\r\n                  />\r\n                )}\r\n\r\n                <Checkbox\r\n                  label=\"Weekly rent available\"\r\n                  checked={watch(\"weeklyRentAvailable\")}\r\n                  onCheckedChange={(checked) =>\r\n                    setValue(\"weeklyRentAvailable\", !!checked)\r\n                  }\r\n                />\r\n                {watch(\"weeklyRentAvailable\") && (\r\n                  <Input\r\n                    label=\"Weekly Rent (KES)\"\r\n                    type=\"number\"\r\n                    min={0}\r\n                    placeholder=\"e.g., 8000\"\r\n                    {...register(\"weeklyRent\", { valueAsNumber: true })}\r\n                  />\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Step 4: Features */}\r\n        {currentStep === \"features\" && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Property Features</CardTitle>\r\n              <CardDescription>\r\n                Help tenants know what to expect\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"mb-1.5 block text-sm font-medium text-gray-700\">\r\n                    Water Type\r\n                  </label>\r\n                  <Select\r\n                    value={watch(\"waterType\")}\r\n                    onValueChange={(value) => setValue(\"waterType\", value)}\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {Object.entries(waterTypeLabels).map(([value, label]) => (\r\n                        <SelectItem key={value} value={value}>\r\n                          {label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"mb-1.5 block text-sm font-medium text-gray-700\">\r\n                    Electricity Type\r\n                  </label>\r\n                  <Select\r\n                    value={watch(\"electricityType\")}\r\n                    onValueChange={(value) =>\r\n                      setValue(\"electricityType\", value)\r\n                    }\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {Object.entries(electricityTypeLabels).map(\r\n                        ([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        )\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">\r\n                  Property Features\r\n                </label>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <Checkbox\r\n                    label=\"Parking available\"\r\n                    checked={watch(\"parking\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"parking\", !!checked)\r\n                    }\r\n                  />\r\n                  <Checkbox\r\n                    label=\"Pets allowed\"\r\n                    checked={watch(\"petsAllowed\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"petsAllowed\", !!checked)\r\n                    }\r\n                  />\r\n                  <Checkbox\r\n                    label=\"Family friendly\"\r\n                    checked={watch(\"familyFriendly\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"familyFriendly\", !!checked)\r\n                    }\r\n                  />\r\n                  <Checkbox\r\n                    label=\"Bachelor friendly\"\r\n                    checked={watch(\"bachelorFriendly\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"bachelorFriendly\", !!checked)\r\n                    }\r\n                  />\r\n                  <Checkbox\r\n                    label=\"Gated community\"\r\n                    checked={watch(\"gatedCommunity\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"gatedCommunity\", !!checked)\r\n                    }\r\n                  />\r\n                  <Checkbox\r\n                    label=\"Furnished\"\r\n                    checked={watch(\"furnished\")}\r\n                    onCheckedChange={(checked) =>\r\n                      setValue(\"furnished\", !!checked)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {watch(\"parking\") && (\r\n                <Input\r\n                  label=\"Number of Parking Spaces\"\r\n                  type=\"number\"\r\n                  min={1}\r\n                  max={10}\r\n                  {...register(\"parkingSpaces\", { valueAsNumber: true })}\r\n                />\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                  Amenities\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {amenitiesList.map((amenity) => (\r\n                    <button\r\n                      key={amenity}\r\n                      type=\"button\"\r\n                      onClick={() => toggleAmenity(amenity)}\r\n                      className={cn(\r\n                        \"rounded-full px-3 py-1.5 text-sm font-medium transition-colors\",\r\n                        selectedAmenities.includes(amenity)\r\n                          ? \"bg-teal-600 text-white\"\r\n                          : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                      )}\r\n                    >\r\n                      {selectedAmenities.includes(amenity) && (\r\n                        <Check className=\"mr-1 inline h-3 w-3\" />\r\n                      )}\r\n                      {amenity}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Step 5: Photos */}\r\n        {currentStep === \"photos\" && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Property Photos</CardTitle>\r\n              <CardDescription>\r\n                Upload at least 3 clear photos. Photos will be watermarked with\r\n                date and app name.\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {/* Photo Upload Area */}\r\n              <label className=\"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-8 transition-colors hover:border-teal-500 hover:bg-teal-50\">\r\n                {uploadingPhoto ? (\r\n                  <Loader2 className=\"h-8 w-8 animate-spin text-teal-600\" />\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"mb-2 h-8 w-8 text-gray-400\" />\r\n                    <p className=\"text-sm font-medium text-gray-700\">\r\n                      Click to upload photos\r\n                    </p>\r\n                    <p className=\"mt-1 text-xs text-gray-500\">\r\n                      JPG, PNG, WebP up to 10MB each (Max 10 photos)\r\n                    </p>\r\n                  </>\r\n                )}\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"hidden\"\r\n                  accept=\"image/jpeg,image/png,image/webp\"\r\n                  multiple\r\n                  onChange={(e) => handlePhotoUpload(e.target.files)}\r\n                  disabled={uploadingPhoto || photos.length >= 10}\r\n                />\r\n              </label>\r\n\r\n              {/* Uploaded Photos Grid */}\r\n              {photos.length > 0 && (\r\n                <div>\r\n                  <p className=\"mb-2 text-sm text-gray-600\">\r\n                    {photos.length} photo{photos.length !== 1 ? \"s\" : \"\"}{\" \"}\r\n                    uploaded. Click a photo to set as main.\r\n                  </p>\r\n                  <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3\">\r\n                    {photos.map((photo) => (\r\n                      <div\r\n                        key={photo.publicId}\r\n                        className={cn(\r\n                          \"group relative aspect-[4/3] overflow-hidden rounded-lg border-2 cursor-pointer\",\r\n                          photo.isMain\r\n                            ? \"border-teal-600\"\r\n                            : \"border-transparent\"\r\n                        )}\r\n                        onClick={() => setMainPhoto(photo.publicId)}\r\n                      >\r\n                        <img\r\n                          src={photo.url}\r\n                          alt=\"Property\"\r\n                          className=\"h-full w-full object-cover\"\r\n                        />\r\n                        {photo.isMain && (\r\n                          <div className=\"absolute left-2 top-2 rounded bg-teal-600 px-2 py-0.5 text-xs font-medium text-white\">\r\n                            Main\r\n                          </div>\r\n                        )}\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            removePhoto(photo.publicId);\r\n                          }}\r\n                          className=\"absolute right-2 top-2 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 text-white opacity-0 transition-opacity group-hover:opacity-100\"\r\n                        >\r\n                          <X className=\"h-4 w-4\" />\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {photos.length < 3 && (\r\n                <p className=\"text-sm text-amber-600\">\r\n                  ΓÜá∩╕Å Please upload at least 3 photos to continue\r\n                </p>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Navigation Buttons */}\r\n        <div className=\"mt-6 flex justify-between\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={prevStep}\r\n            disabled={currentStepIndex === 0}\r\n          >\r\n            Previous\r\n          </Button>\r\n\r\n          {currentStep === \"photos\" ? (\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting || photos.length < 3}\r\n              isLoading={isSubmitting}\r\n            >\r\n              Create Listing\r\n            </Button>\r\n          ) : (\r\n            <Button type=\"button\" onClick={nextStep}>\r\n              Next\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\landlord\\listings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\landlord\\verification\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(dashboard)\\saved\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\about\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// About page for VerifiedNyumba\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  BadgeCheck,\r\n  Users,\r\n  Building2,\r\n  Target,\r\n  Heart,\r\n  Shield,\r\n  MapPin,\r\n  ArrowRight,\r\n  CheckCircle2,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\n\r\nconst stats = [\r\n  { value: \"200+\", label: \"Properties Listed\" },\r\n  { value: \"500+\", label: \"Happy Tenants\" },\r\n  { value: \"50+\", label: \"Verified Landlords\" },\r\n  { value: \"15+\", label: \"Nairobi Areas\" },\r\n];\r\n\r\nconst values = [\r\n  {\r\n    icon: Shield,\r\n    title: \"Trust & Transparency\",\r\n    description:\r\n      \"Every landlord is verified. Every listing is genuine. No hidden fees or surprises.\",\r\n  },\r\n  {\r\n    icon: Heart,\r\n    title: \"Client First\",\r\n    description:\r\n      \"Your satisfaction is our priority. We're here to help you find your perfect home.\",\r\n  },\r\n  {\r\n    icon: Target,\r\n    title: \"Local Expertise\",\r\n    description:\r\n      \"Deep knowledge of Nairobi neighborhoods helps us match you with the right property.\",\r\n  },\r\n  {\r\n    icon: BadgeCheck,\r\n    title: \"Quality Assurance\",\r\n    description:\r\n      \"We personally verify listings to ensure accuracy and prevent scams.\",\r\n  },\r\n];\r\n\r\nconst whyChooseUs = [\r\n  {\r\n    title: \"Why VerifiedNyumba\",\r\n    description:\r\n      \"We understand the challenges of house hunting in Nairobi. That's why we built a platform that puts transparency and trust first.\",\r\n    features: [\r\n      \"Direct landlord connections\",\r\n      \"Verified property listings\",\r\n      \"No agent commissions\",\r\n      \"Transparent pricing\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"Our Promise\",\r\n    description:\r\n      \"Every property on our platform goes through a verification process. We check landlord identity and property ownership.\",\r\n    features: [\r\n      \"ID verification for landlords\",\r\n      \"Property ownership proof\",\r\n      \"Accurate listing photos\",\r\n      \"Real-time availability\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"Local Expertise\",\r\n    description:\r\n      \"Our team knows Nairobi inside out. From Westlands to Kilimani, Karen to Kasarani, we've got you covered.\",\r\n    features: [\r\n      \"Neighborhood guides\",\r\n      \"Price insights by area\",\r\n      \"Transport accessibility info\",\r\n      \"Local amenities mapping\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"Client First Approach\",\r\n    description:\r\n      \"We're not just a listing platform. Our dedicated team is here to support you throughout your house-hunting journey.\",\r\n    features: [\r\n      \"Dedicated support team\",\r\n      \"Viewing coordination\",\r\n      \"Negotiation assistance\",\r\n      \"Move-in support\",\r\n    ],\r\n  },\r\n];\r\n\r\nconst team = [\r\n  {\r\n    name: \"Sarah Wanjiku\",\r\n    role: \"Founder & CEO\",\r\n    image: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400\",\r\n  },\r\n  {\r\n    name: \"James Ochieng\",\r\n    role: \"Head of Operations\",\r\n    image: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400\",\r\n  },\r\n  {\r\n    name: \"Grace Muthoni\",\r\n    role: \"Customer Success\",\r\n    image: \"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400\",\r\n  },\r\n];\r\n\r\nexport default function AboutPage() {\r\n  return (\r\n    <div>\r\n      {/* Hero Section */}\r\n      <section className=\"relative min-h-[500px] overflow-hidden\">\r\n        <div className=\"absolute inset-0\">\r\n          <Image\r\n            src=\"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1920\"\r\n            alt=\"Modern home interior\"\r\n            fill\r\n            className=\"object-cover\"\r\n            priority\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-transparent\" />\r\n        </div>\r\n\r\n        <div className=\"container relative mx-auto px-4 py-32\">\r\n          <div className=\"max-w-2xl\">\r\n            <p className=\"mb-4 text-sm font-semibold uppercase tracking-wider text-[#D4A373]\">\r\n              About Us\r\n            </p>\r\n            <h1 className=\"mb-6 text-4xl font-bold text-white md:text-5xl lg:text-6xl\">\r\n              Helping You Find{\" \"}\r\n              <span className=\"text-[#D4A373]\">a Place to Belong</span>\r\n            </h1>\r\n            <p className=\"text-lg text-gray-200\">\r\n              We&apos;re on a mission to transform Kenya&apos;s rental market by\r\n              connecting tenants directly with verified landlords.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* About Story Section */}\r\n      <section className=\"py-20 lg:py-28\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"grid gap-16 lg:grid-cols-2 lg:items-center\">\r\n            {/* Left - Content */}\r\n            <div>\r\n              <p className=\"mb-2 text-sm font-semibold uppercase tracking-wider text-[#D4A373]\">\r\n                Our Story\r\n              </p>\r\n              <h2 className=\"mb-6 text-3xl font-bold text-gray-900 md:text-4xl\">\r\n                About Story\r\n              </h2>\r\n              <div className=\"space-y-4 text-gray-600 leading-relaxed\">\r\n                <p>\r\n                  VerifiedNyumba was born from a simple frustration: the chaos\r\n                  and distrust in Kenya&apos;s rental market. Too many fake\r\n                  listings, agent abuse, and hidden fees made house hunting a\r\n                  nightmare.\r\n                </p>\r\n                <p>\r\n                  We decided to build something better. A platform where every\r\n                  landlord is verified, every listing is genuine, and tenants\r\n                  can find homes directly without middlemen taking a cut.\r\n                </p>\r\n                <p>\r\n                  Today, we&apos;re proud to have helped hundreds of Kenyans\r\n                  find their perfect homes. But we&apos;re just getting started.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"mt-10\">\r\n                <Link href=\"/properties\">\r\n                  <Button size=\"lg\" className=\"gap-2\">\r\n                    Browse Properties\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Right - Image */}\r\n            <div className=\"relative\">\r\n              <div className=\"relative aspect-[4/3] overflow-hidden rounded-3xl\">\r\n                <Image\r\n                  src=\"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800\"\r\n                  alt=\"Modern home\"\r\n                  fill\r\n                  className=\"object-cover\"\r\n                />\r\n              </div>\r\n              {/* Floating Stats Card */}\r\n              <div className=\"absolute -bottom-8 -left-8 rounded-2xl bg-white p-6 shadow-xl lg:-left-12\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-[#1B4D3E]\">\r\n                    <Building2 className=\"h-7 w-7 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">200+</p>\r\n                    <p className=\"text-sm text-gray-500\">Properties Listed</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Why Choose Us Grid */}\r\n      <section className=\"bg-[#F9FAFB] py-20 lg:py-28\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center mb-16\">\r\n            <p className=\"mb-2 text-sm font-semibold uppercase tracking-wider text-[#D4A373]\">\r\n              Why Us\r\n            </p>\r\n            <h2 className=\"text-3xl font-bold text-gray-900 md:text-4xl\">\r\n              Why Choose Us\r\n            </h2>\r\n          </div>\r\n\r\n          <div className=\"grid gap-8 md:grid-cols-2\">\r\n            {whyChooseUs.map((item) => (\r\n              <div\r\n                key={item.title}\r\n                className=\"rounded-2xl bg-white p-8 shadow-sm border border-gray-100\"\r\n              >\r\n                <h3 className=\"mb-3 text-xl font-semibold text-gray-900\">\r\n                  {item.title}\r\n                </h3>\r\n                <p className=\"mb-6 text-gray-600\">{item.description}</p>\r\n                <ul className=\"space-y-3\">\r\n                  {item.features.map((feature) => (\r\n                    <li\r\n                      key={feature}\r\n                      className=\"flex items-center gap-3 text-sm text-gray-700\"\r\n                    >\r\n                      <CheckCircle2 className=\"h-5 w-5 text-[#1B4D3E]\" />\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Our Values */}\r\n      <section className=\"py-20 lg:py-28\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center mb-16\">\r\n            <p className=\"mb-2 text-sm font-semibold uppercase tracking-wider text-[#D4A373]\">\r\n              Our Values\r\n            </p>\r\n            <h2 className=\"text-3xl font-bold text-gray-900 md:text-4xl\">\r\n              What We Stand For\r\n            </h2>\r\n          </div>\r\n\r\n          <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-4\">\r\n            {values.map((value) => (\r\n              <div key={value.title} className=\"text-center\">\r\n                <div className=\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-2xl bg-[#1B4D3E]/10\">\r\n                  <value.icon className=\"h-8 w-8 text-[#1B4D3E]\" />\r\n                </div>\r\n                <h3 className=\"mb-3 text-lg font-semibold text-gray-900\">\r\n                  {value.title}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600\">{value.description}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Stats Section */}\r\n      <section className=\"bg-[#1B4D3E] py-16\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"grid grid-cols-2 gap-8 md:grid-cols-4\">\r\n            {stats.map((stat) => (\r\n              <div key={stat.label} className=\"text-center\">\r\n                <p className=\"text-4xl font-bold text-white md:text-5xl\">\r\n                  {stat.value}\r\n                </p>\r\n                <p className=\"mt-2 text-gray-300\">{stat.label}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Team Section */}\r\n      <section className=\"py-20 lg:py-28\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center mb-16\">\r\n            <p className=\"mb-2 text-sm font-semibold uppercase tracking-wider text-[#D4A373]\">\r\n              Our Team\r\n            </p>\r\n            <h2 className=\"text-3xl font-bold text-gray-900 md:text-4xl\">\r\n              Meet the Team\r\n            </h2>\r\n          </div>\r\n\r\n          <div className=\"grid gap-8 md:grid-cols-3 max-w-4xl mx-auto\">\r\n            {team.map((member) => (\r\n              <div key={member.name} className=\"text-center\">\r\n                <div className=\"relative mx-auto mb-6 h-32 w-32 overflow-hidden rounded-full\">\r\n                  <Image\r\n                    src={member.image}\r\n                    alt={member.name}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                  />\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                  {member.name}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-500\">{member.role}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* CTA Section */}\r\n      <section className=\"py-20 lg:py-28 bg-[#F9FAFB]\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center max-w-2xl mx-auto\">\r\n            <h2 className=\"mb-4 text-3xl font-bold text-gray-900 md:text-4xl\">\r\n              Ready to Find Your Home?\r\n            </h2>\r\n            <p className=\"mb-8 text-gray-600\">\r\n              Browse our verified listings and find your perfect rental property\r\n              today.\r\n            </p>\r\n            <div className=\"flex flex-col items-center justify-center gap-4 sm:flex-row\">\r\n              <Link href=\"/properties\">\r\n                <Button size=\"lg\" variant=\"accent\" className=\"gap-2\">\r\n                  Browse Properties\r\n                  <ArrowRight className=\"h-4 w-4\" />\r\n                </Button>\r\n              </Link>\r\n              <Link href=\"/register\">\r\n                <Button size=\"lg\" variant=\"outline\">\r\n                  Create Account\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\properties\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\properties\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Properties listing page for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport {\r\n  Filter,\r\n  X,\r\n  Loader2,\r\n  Grid,\r\n  List,\r\n  SlidersHorizontal,\r\n  Search,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport { Input } from \"@/app/components/ui/input\";\r\nimport { Checkbox } from \"@/app/components/ui/checkbox\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/app/components/ui/select\";\r\nimport { PropertyCard } from \"@/app/components/cards/PropertyCard\";\r\nimport { cn, propertyTypeLabels, buildingTypeLabels } from \"@/app/lib/utils\";\r\nimport { kenyanAreas } from \"@/app/lib/validations/listing\";\r\n\r\ninterface Listing {\r\n  id: string;\r\n  title: string;\r\n  area: string;\r\n  estate: string | null;\r\n  propertyType: string;\r\n  monthlyRent: number;\r\n  bedrooms: number;\r\n  bathrooms: number;\r\n  parking: boolean;\r\n  parkingSpaces: number;\r\n  photos: { url: string; isMain: boolean }[];\r\n  landlord: {\r\n    verificationStatus: string;\r\n  };\r\n}\r\n\r\ninterface Pagination {\r\n  page: number;\r\n  limit: number;\r\n  total: number;\r\n  pages: number;\r\n}\r\n\r\nexport default function PropertiesPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const [listings, setListings] = React.useState<Listing[]>([]);\r\n  const [pagination, setPagination] = React.useState<Pagination | null>(null);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [showFilters, setShowFilters] = React.useState(false);\r\n  const [viewMode, setViewMode] = React.useState<\"grid\" | \"list\">(\"grid\");\r\n\r\n  // Filter states\r\n  const [area, setArea] = React.useState(searchParams.get(\"area\") || \"\");\r\n  const [propertyType, setPropertyType] = React.useState(\r\n    searchParams.get(\"propertyType\") || \"\"\r\n  );\r\n  const [buildingType, setBuildingType] = React.useState(\r\n    searchParams.get(\"buildingType\") || \"\"\r\n  );\r\n  const [minPrice, setMinPrice] = React.useState(\r\n    searchParams.get(\"minPrice\") || \"\"\r\n  );\r\n  const [maxPrice, setMaxPrice] = React.useState(\r\n    searchParams.get(\"maxPrice\") || \"\"\r\n  );\r\n  const [verifiedOnly, setVerifiedOnly] = React.useState(\r\n    searchParams.get(\"verifiedLandlordOnly\") === \"true\"\r\n  );\r\n  const [sortBy, setSortBy] = React.useState(\r\n    searchParams.get(\"sortBy\") || \"newest\"\r\n  );\r\n\r\n  // Feature filters\r\n  const [parking, setParking] = React.useState(\r\n    searchParams.get(\"parking\") === \"true\"\r\n  );\r\n  const [petsAllowed, setPetsAllowed] = React.useState(\r\n    searchParams.get(\"petsAllowed\") === \"true\"\r\n  );\r\n  const [furnished, setFurnished] = React.useState(\r\n    searchParams.get(\"furnished\") === \"true\"\r\n  );\r\n  const [gatedCommunity, setGatedCommunity] = React.useState(\r\n    searchParams.get(\"gatedCommunity\") === \"true\"\r\n  );\r\n\r\n  const fetchListings = React.useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (area) params.set(\"area\", area);\r\n      if (propertyType) params.set(\"propertyType\", propertyType);\r\n      if (buildingType) params.set(\"buildingType\", buildingType);\r\n      if (minPrice) params.set(\"minPrice\", minPrice);\r\n      if (maxPrice) params.set(\"maxPrice\", maxPrice);\r\n      if (verifiedOnly) params.set(\"verifiedLandlordOnly\", \"true\");\r\n      if (parking) params.set(\"parking\", \"true\");\r\n      if (petsAllowed) params.set(\"petsAllowed\", \"true\");\r\n      if (furnished) params.set(\"furnished\", \"true\");\r\n      if (gatedCommunity) params.set(\"gatedCommunity\", \"true\");\r\n      params.set(\"sortBy\", sortBy);\r\n\r\n      const res = await fetch(`/api/listings?${params.toString()}`);\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setListings(data.listings);\r\n        setPagination(data.pagination);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch listings:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [\r\n    area,\r\n    propertyType,\r\n    buildingType,\r\n    minPrice,\r\n    maxPrice,\r\n    verifiedOnly,\r\n    parking,\r\n    petsAllowed,\r\n    furnished,\r\n    gatedCommunity,\r\n    sortBy,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    fetchListings();\r\n  }, [fetchListings]);\r\n\r\n  const applyFilters = () => {\r\n    const params = new URLSearchParams();\r\n    if (area) params.set(\"area\", area);\r\n    if (propertyType) params.set(\"propertyType\", propertyType);\r\n    if (buildingType) params.set(\"buildingType\", buildingType);\r\n    if (minPrice) params.set(\"minPrice\", minPrice);\r\n    if (maxPrice) params.set(\"maxPrice\", maxPrice);\r\n    if (verifiedOnly) params.set(\"verifiedLandlordOnly\", \"true\");\r\n    if (parking) params.set(\"parking\", \"true\");\r\n    if (petsAllowed) params.set(\"petsAllowed\", \"true\");\r\n    if (furnished) params.set(\"furnished\", \"true\");\r\n    if (gatedCommunity) params.set(\"gatedCommunity\", \"true\");\r\n    params.set(\"sortBy\", sortBy);\r\n\r\n    router.push(`/properties?${params.toString()}`);\r\n    setShowFilters(false);\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setArea(\"\");\r\n    setPropertyType(\"\");\r\n    setBuildingType(\"\");\r\n    setMinPrice(\"\");\r\n    setMaxPrice(\"\");\r\n    setVerifiedOnly(false);\r\n    setParking(false);\r\n    setPetsAllowed(false);\r\n    setFurnished(false);\r\n    setGatedCommunity(false);\r\n    setSortBy(\"newest\");\r\n    router.push(\"/properties\");\r\n  };\r\n\r\n  const activeFiltersCount = [\r\n    area,\r\n    propertyType,\r\n    buildingType,\r\n    minPrice,\r\n    maxPrice,\r\n    verifiedOnly,\r\n    parking,\r\n    petsAllowed,\r\n    furnished,\r\n    gatedCommunity,\r\n  ].filter(Boolean).length;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#F9FAFB]\">\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b border-gray-200\">\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <div className=\"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-semibold uppercase tracking-wider text-[#D4A373] mb-2\">\r\n                Browse Listings\r\n              </p>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 md:text-4xl\">\r\n                Property Rentals\r\n              </h1>\r\n              <p className=\"mt-2 text-gray-600\">\r\n                {pagination?.total || 0} properties available\r\n              </p>\r\n            </div>\r\n\r\n            {/* Quick Filters */}\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <Button\r\n                variant={sortBy === \"newest\" ? \"default\" : \"ghost\"}\r\n                size=\"sm\"\r\n                onClick={() => setSortBy(\"newest\")}\r\n              >\r\n                Hot Deals\r\n              </Button>\r\n              <Button\r\n                variant={sortBy === \"price_asc\" ? \"default\" : \"ghost\"}\r\n                size=\"sm\"\r\n                onClick={() => setSortBy(\"price_asc\")}\r\n                className=\"text-gray-600\"\r\n              >\r\n                Price Γåæ\r\n              </Button>\r\n              <Button\r\n                variant={sortBy === \"price_desc\" ? \"default\" : \"ghost\"}\r\n                size=\"sm\"\r\n                onClick={() => setSortBy(\"price_desc\")}\r\n                className=\"text-gray-600\"\r\n              >\r\n                Price Γåô\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"flex flex-col gap-8 lg:flex-row\">\r\n          {/* Sidebar Filters - Desktop */}\r\n          <aside className=\"hidden lg:block lg:w-72 flex-shrink-0\">\r\n            <div className=\"sticky top-24 rounded-2xl bg-white p-6 shadow-sm border border-gray-100\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-lg font-semibold text-gray-900\">Filters</h2>\r\n                {activeFiltersCount > 0 && (\r\n                  <button\r\n                    onClick={clearFilters}\r\n                    className=\"text-sm text-[#1B4D3E] hover:underline\"\r\n                  >\r\n                    Clear all\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-6\">\r\n                {/* Location */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Location\r\n                  </label>\r\n                  <Select value={area} onValueChange={setArea}>\r\n                    <SelectTrigger className=\"rounded-xl\">\r\n                      <SelectValue placeholder=\"All areas\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"\">All areas</SelectItem>\r\n                      {kenyanAreas.map((a) => (\r\n                        <SelectItem key={a} value={a}>\r\n                          {a}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {/* Property Type */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Property Type\r\n                  </label>\r\n                  <Select value={propertyType} onValueChange={setPropertyType}>\r\n                    <SelectTrigger className=\"rounded-xl\">\r\n                      <SelectValue placeholder=\"All types\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"\">All types</SelectItem>\r\n                      {Object.entries(propertyTypeLabels).map(\r\n                        ([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        )\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {/* Building Type */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Building Type\r\n                  </label>\r\n                  <Select value={buildingType} onValueChange={setBuildingType}>\r\n                    <SelectTrigger className=\"rounded-xl\">\r\n                      <SelectValue placeholder=\"All buildings\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"\">All buildings</SelectItem>\r\n                      {Object.entries(buildingTypeLabels).map(\r\n                        ([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        )\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {/* Price Range */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Price Range (KES)\r\n                  </label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Min\"\r\n                      value={minPrice}\r\n                      onChange={(e) => setMinPrice(e.target.value)}\r\n                      className=\"rounded-xl\"\r\n                    />\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Max\"\r\n                      value={maxPrice}\r\n                      onChange={(e) => setMaxPrice(e.target.value)}\r\n                      className=\"rounded-xl\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Features */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                    Features\r\n                  </label>\r\n                  <div className=\"space-y-3\">\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <Checkbox\r\n                        checked={verifiedOnly}\r\n                        onCheckedChange={(checked) =>\r\n                          setVerifiedOnly(checked as boolean)\r\n                        }\r\n                      />\r\n                      <span className=\"text-sm\">Verified landlords only</span>\r\n                    </label>\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <Checkbox\r\n                        checked={parking}\r\n                        onCheckedChange={(checked) =>\r\n                          setParking(checked as boolean)\r\n                        }\r\n                      />\r\n                      <span className=\"text-sm\">Parking</span>\r\n                    </label>\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <Checkbox\r\n                        checked={petsAllowed}\r\n                        onCheckedChange={(checked) =>\r\n                          setPetsAllowed(checked as boolean)\r\n                        }\r\n                      />\r\n                      <span className=\"text-sm\">Pets allowed</span>\r\n                    </label>\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <Checkbox\r\n                        checked={furnished}\r\n                        onCheckedChange={(checked) =>\r\n                          setFurnished(checked as boolean)\r\n                        }\r\n                      />\r\n                      <span className=\"text-sm\">Furnished</span>\r\n                    </label>\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <Checkbox\r\n                        checked={gatedCommunity}\r\n                        onCheckedChange={(checked) =>\r\n                          setGatedCommunity(checked as boolean)\r\n                        }\r\n                      />\r\n                      <span className=\"text-sm\">Gated community</span>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <Button\r\n                  onClick={applyFilters}\r\n                  className=\"w-full\"\r\n                  variant=\"accent\"\r\n                >\r\n                  Apply Filters\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </aside>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"flex-1\">\r\n            {/* Mobile Filter Button & View Toggle */}\r\n            <div className=\"flex items-center justify-between mb-6 lg:justify-end\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"lg:hidden gap-2\"\r\n                onClick={() => setShowFilters(true)}\r\n              >\r\n                <SlidersHorizontal className=\"h-4 w-4\" />\r\n                Filters\r\n                {activeFiltersCount > 0 && (\r\n                  <span className=\"ml-1 flex h-5 w-5 items-center justify-center rounded-full bg-[#1B4D3E] text-xs text-white\">\r\n                    {activeFiltersCount}\r\n                  </span>\r\n                )}\r\n              </Button>\r\n\r\n              {/* View Toggle */}\r\n              <div className=\"flex items-center gap-1 rounded-xl bg-white p-1 border border-gray-200\">\r\n                <button\r\n                  onClick={() => setViewMode(\"grid\")}\r\n                  className={cn(\r\n                    \"rounded-lg p-2 transition-colors\",\r\n                    viewMode === \"grid\"\r\n                      ? \"bg-[#1B4D3E] text-white\"\r\n                      : \"text-gray-500 hover:text-gray-900\"\r\n                  )}\r\n                >\r\n                  <Grid className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => setViewMode(\"list\")}\r\n                  className={cn(\r\n                    \"rounded-lg p-2 transition-colors\",\r\n                    viewMode === \"list\"\r\n                      ? \"bg-[#1B4D3E] text-white\"\r\n                      : \"text-gray-500 hover:text-gray-900\"\r\n                  )}\r\n                >\r\n                  <List className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Results */}\r\n            {isLoading ? (\r\n              <div className=\"flex items-center justify-center py-20\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-[#1B4D3E]\" />\r\n              </div>\r\n            ) : listings.length === 0 ? (\r\n              <div className=\"rounded-2xl bg-white p-12 text-center shadow-sm border border-gray-100\">\r\n                <Search className=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  No properties found\r\n                </h3>\r\n                <p className=\"text-gray-500 mb-6\">\r\n                  Try adjusting your filters to find more results\r\n                </p>\r\n                <Button onClick={clearFilters} variant=\"outline\">\r\n                  Clear Filters\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div\r\n                  className={cn(\r\n                    \"grid gap-6\",\r\n                    viewMode === \"grid\"\r\n                      ? \"grid-cols-1 sm:grid-cols-2 xl:grid-cols-3\"\r\n                      : \"grid-cols-1\"\r\n                  )}\r\n                >\r\n                  {listings.map((listing) => (\r\n                    <PropertyCard\r\n                      key={listing.id}\r\n                      id={listing.id}\r\n                      title={listing.title}\r\n                      area={listing.area}\r\n                      estate={listing.estate}\r\n                      propertyType={listing.propertyType}\r\n                      monthlyRent={listing.monthlyRent}\r\n                      bedrooms={listing.bedrooms}\r\n                      bathrooms={listing.bathrooms}\r\n                      parking={listing.parking}\r\n                      parkingSpaces={listing.parkingSpaces}\r\n                      photos={listing.photos}\r\n                      isVerifiedLandlord={\r\n                        listing.landlord.verificationStatus === \"VERIFIED\"\r\n                      }\r\n                      variant={viewMode === \"grid\" ? \"grid\" : \"horizontal\"}\r\n                    />\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {pagination && pagination.pages > 1 && (\r\n                  <div className=\"mt-10 flex justify-center\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {Array.from(\r\n                        { length: pagination.pages },\r\n                        (_, i) => i + 1\r\n                      ).map((page) => (\r\n                        <button\r\n                          key={page}\r\n                          className={cn(\r\n                            \"h-10 w-10 rounded-xl text-sm font-medium transition-colors\",\r\n                            page === pagination.page\r\n                              ? \"bg-[#1B4D3E] text-white\"\r\n                              : \"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200\"\r\n                          )}\r\n                        >\r\n                          {page}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Filter Modal */}\r\n      {showFilters && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div\r\n            className=\"absolute inset-0 bg-black/50\"\r\n            onClick={() => setShowFilters(false)}\r\n          />\r\n          <div className=\"absolute bottom-0 left-0 right-0 max-h-[85vh] overflow-y-auto rounded-t-3xl bg-white p-6 animate-slide-up\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Filters</h2>\r\n              <button\r\n                onClick={() => setShowFilters(false)}\r\n                className=\"rounded-full p-2 hover:bg-gray-100\"\r\n              >\r\n                <X className=\"h-5 w-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {/* Location */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Location\r\n                </label>\r\n                <Select value={area} onValueChange={setArea}>\r\n                  <SelectTrigger className=\"rounded-xl\">\r\n                    <SelectValue placeholder=\"All areas\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"\">All areas</SelectItem>\r\n                    {kenyanAreas.map((a) => (\r\n                      <SelectItem key={a} value={a}>\r\n                        {a}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Property Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Property Type\r\n                </label>\r\n                <Select value={propertyType} onValueChange={setPropertyType}>\r\n                  <SelectTrigger className=\"rounded-xl\">\r\n                    <SelectValue placeholder=\"All types\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"\">All types</SelectItem>\r\n                    {Object.entries(propertyTypeLabels).map(\r\n                      ([value, label]) => (\r\n                        <SelectItem key={value} value={value}>\r\n                          {label}\r\n                        </SelectItem>\r\n                      )\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Price Range */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Price Range (KES)\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    type=\"number\"\r\n                    placeholder=\"Min\"\r\n                    value={minPrice}\r\n                    onChange={(e) => setMinPrice(e.target.value)}\r\n                    className=\"rounded-xl\"\r\n                  />\r\n                  <Input\r\n                    type=\"number\"\r\n                    placeholder=\"Max\"\r\n                    value={maxPrice}\r\n                    onChange={(e) => setMaxPrice(e.target.value)}\r\n                    className=\"rounded-xl\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Features */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                  Features\r\n                </label>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <Checkbox\r\n                      checked={verifiedOnly}\r\n                      onCheckedChange={(checked) =>\r\n                        setVerifiedOnly(checked as boolean)\r\n                      }\r\n                    />\r\n                    <span className=\"text-sm\">Verified only</span>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <Checkbox\r\n                      checked={parking}\r\n                      onCheckedChange={(checked) =>\r\n                        setParking(checked as boolean)\r\n                      }\r\n                    />\r\n                    <span className=\"text-sm\">Parking</span>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <Checkbox\r\n                      checked={petsAllowed}\r\n                      onCheckedChange={(checked) =>\r\n                        setPetsAllowed(checked as boolean)\r\n                      }\r\n                    />\r\n                    <span className=\"text-sm\">Pets allowed</span>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <Checkbox\r\n                      checked={furnished}\r\n                      onCheckedChange={(checked) =>\r\n                        setFurnished(checked as boolean)\r\n                      }\r\n                    />\r\n                    <span className=\"text-sm\">Furnished</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"flex-1\"\r\n                  onClick={clearFilters}\r\n                >\r\n                  Clear All\r\n                </Button>\r\n                <Button\r\n                  variant=\"accent\"\r\n                  className=\"flex-1\"\r\n                  onClick={applyFilters}\r\n                >\r\n                  Apply Filters\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\(main)\\services\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\admin\\reports\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\admin\\verification\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\auth\\login\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":72,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Login API route for VerifiedNyumba\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport prisma from '@/app/lib/prisma'\r\nimport {\r\n  comparePassword,\r\n  generateAccessToken,\r\n  generateRefreshToken,\r\n  storeRefreshToken,\r\n  setAuthCookies,\r\n} from '@/app/lib/auth'\r\nimport { loginSchema } from '@/app/lib/validations/auth'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n\r\n    // Validate input\r\n    const validationResult = loginSchema.safeParse(body)\r\n    if (!validationResult.success) {\r\n      return NextResponse.json(\r\n        { error: 'Validation failed', details: validationResult.error.flatten() },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    const { email, password } = validationResult.data\r\n\r\n    // Find user by email\r\n    const user = await prisma.user.findUnique({\r\n      where: { email: email.toLowerCase() },\r\n    })\r\n\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid email or password' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Verify password\r\n    const isPasswordValid = await comparePassword(password, user.password)\r\n    if (!isPasswordValid) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid email or password' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Generate tokens\r\n    const tokenPayload = {\r\n      userId: user.id,\r\n      email: user.email,\r\n      role: user.role,\r\n    }\r\n\r\n    const accessToken = generateAccessToken(tokenPayload)\r\n    const refreshToken = generateRefreshToken(tokenPayload)\r\n\r\n    // Store refresh token in database\r\n    await storeRefreshToken(user.id, refreshToken)\r\n\r\n    // Update last login time\r\n    await prisma.user.update({\r\n      where: { id: user.id },\r\n      data: { lastLoginAt: new Date() },\r\n    })\r\n\r\n    // Set cookies\r\n    await setAuthCookies(accessToken, refreshToken)\r\n\r\n    // Return user data (excluding password)\r\n    const { password: _, ...userWithoutPassword } = user\r\n\r\n    return NextResponse.json({\r\n      message: 'Login successful',\r\n      user: userWithoutPassword,\r\n    })\r\n  } catch (error) {\r\n    console.error('Login error:', error)\r\n    return NextResponse.json(\r\n      { error: 'An error occurred during login' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\auth\\logout\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":6,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Logout API route for VerifiedNyumba\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { cookies } from 'next/headers'\r\nimport { removeRefreshToken, clearAuthCookies } from '@/app/lib/auth'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const cookieStore = await cookies()\r\n    const refreshToken = cookieStore.get('refreshToken')?.value\r\n\r\n    // Remove refresh token from database if it exists\r\n    if (refreshToken) {\r\n      await removeRefreshToken(refreshToken)\r\n    }\r\n\r\n    // Clear cookies\r\n    await clearAuthCookies()\r\n\r\n    return NextResponse.json({ message: 'Logout successful' })\r\n  } catch (error) {\r\n    console.error('Logout error:', error)\r\n    // Still clear cookies even if there's an error\r\n    await clearAuthCookies()\r\n    return NextResponse.json({ message: 'Logout successful' })\r\n  }\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\auth\\me\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\auth\\refresh\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":16,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Token refresh API route for VerifiedNyumba\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { cookies } from 'next/headers'\r\nimport prisma from '@/app/lib/prisma'\r\nimport {\r\n  verifyRefreshToken,\r\n  validateStoredRefreshToken,\r\n  generateAccessToken,\r\n  generateRefreshToken,\r\n  storeRefreshToken,\r\n  removeRefreshToken,\r\n  setAuthCookies,\r\n  clearAuthCookies,\r\n} from '@/app/lib/auth'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const cookieStore = await cookies()\r\n    const refreshToken = cookieStore.get('refreshToken')?.value\r\n\r\n    if (!refreshToken) {\r\n      return NextResponse.json(\r\n        { error: 'No refresh token provided' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Verify refresh token\r\n    const payload = verifyRefreshToken(refreshToken)\r\n    if (!payload) {\r\n      await clearAuthCookies()\r\n      return NextResponse.json(\r\n        { error: 'Invalid or expired refresh token' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Validate token exists in database\r\n    const isValid = await validateStoredRefreshToken(refreshToken)\r\n    if (!isValid) {\r\n      await clearAuthCookies()\r\n      return NextResponse.json(\r\n        { error: 'Refresh token not found or expired' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Get user\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: payload.userId },\r\n      select: {\r\n        id: true,\r\n        email: true,\r\n        role: true,\r\n      },\r\n    })\r\n\r\n    if (!user) {\r\n      await clearAuthCookies()\r\n      await removeRefreshToken(refreshToken)\r\n      return NextResponse.json(\r\n        { error: 'User not found' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Generate new tokens\r\n    const tokenPayload = {\r\n      userId: user.id,\r\n      email: user.email,\r\n      role: user.role,\r\n    }\r\n\r\n    const newAccessToken = generateAccessToken(tokenPayload)\r\n    const newRefreshToken = generateRefreshToken(tokenPayload)\r\n\r\n    // Remove old refresh token and store new one\r\n    await removeRefreshToken(refreshToken)\r\n    await storeRefreshToken(user.id, newRefreshToken)\r\n\r\n    // Set new cookies\r\n    await setAuthCookies(newAccessToken, newRefreshToken)\r\n\r\n    return NextResponse.json({ message: 'Tokens refreshed successfully' })\r\n  } catch (error) {\r\n    console.error('Token refresh error:', error)\r\n    await clearAuthCookies()\r\n    return NextResponse.json(\r\n      { error: 'An error occurred during token refresh' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\auth\\register\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\bookings\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\bookings\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\chat\\[id]\\messages\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\chat\\[id]\\reveal\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\chat\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\chat\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\chat\\start\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\landlord\\analytics\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\landlord\\listings\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\landlord\\verification\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\landlord\\verification\\submit\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\landlord\\verification\\upload\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\listings\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\listings\\[id]\\save\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\listings\\[id]\\slots\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\listings\\photos\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\listings\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\newsletter\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\reports\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\reviews\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\api\\user\\saved\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\cards\\PropertyCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\cards\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\forms\\SearchForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\forms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\layout\\Footer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Footer component for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  Home,\r\n  Facebook,\r\n  Instagram,\r\n  Twitter,\r\n  Linkedin,\r\n  Send,\r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  ArrowRight,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/app/components/ui/button\";\r\nimport { Input } from \"@/app/components/ui/input\";\r\n\r\nconst quickLinks = [\r\n  { href: \"/\", label: \"Home\" },\r\n  { href: \"/about\", label: \"About us\" },\r\n  { href: \"/properties\", label: \"Properties\" },\r\n  { href: \"/services\", label: \"Services\" },\r\n];\r\n\r\nconst propertyTypes = [\r\n  { href: \"/properties?type=BEDSITTER\", label: \"Bedsitters\" },\r\n  { href: \"/properties?type=ONE_BEDROOM\", label: \"1 Bedroom\" },\r\n  { href: \"/properties?type=TWO_BEDROOM\", label: \"2 Bedroom\" },\r\n  { href: \"/properties?type=THREE_BEDROOM\", label: \"3 Bedroom\" },\r\n];\r\n\r\nconst socialLinks = [\r\n  { href: \"https://facebook.com\", label: \"Facebook\", icon: Facebook },\r\n  { href: \"https://instagram.com\", label: \"Instagram\", icon: Instagram },\r\n  { href: \"https://twitter.com\", label: \"Twitter/X\", icon: Twitter },\r\n  { href: \"https://linkedin.com\", label: \"LinkedIn\", icon: Linkedin },\r\n];\r\n\r\nexport function Footer() {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\r\n  const [message, setMessage] = React.useState(\"\");\r\n\r\n  const handleNewsletterSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!email) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const res = await fetch(\"/api/newsletter\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      const result = await res.json();\r\n\r\n      if (res.ok) {\r\n        setMessage(\"Thanks for subscribing!\");\r\n        setEmail(\"\");\r\n      } else {\r\n        setMessage(result.error || \"Something went wrong. Please try again.\");\r\n      }\r\n    } catch {\r\n      setMessage(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <footer className=\"bg-[#1B4D3E] text-white\">\r\n      {/* Main Footer */}\r\n      <div className=\"container mx-auto px-4 py-16\">\r\n        <div className=\"grid grid-cols-1 gap-12 md:grid-cols-2 lg:grid-cols-4\">\r\n          {/* Brand column */}\r\n          <div className=\"lg:col-span-1\">\r\n            <Link href=\"/\" className=\"flex items-center space-x-3\">\r\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-white\">\r\n                <Home className=\"h-5 w-5 text-[#1B4D3E]\" />\r\n              </div>\r\n              <span className=\"text-xl font-bold\">VerifiedNyumba</span>\r\n            </Link>\r\n            <p className=\"mt-6 text-sm leading-relaxed text-gray-300\">\r\n              Kenya&apos;s trusted platform for finding verified rental\r\n              properties directly from landlords. No agents, no surprises, just\r\n              homes.\r\n            </p>\r\n\r\n            {/* Social Links */}\r\n            <div className=\"mt-6 flex items-center gap-3\">\r\n              {socialLinks.map((social) => (\r\n                <a\r\n                  key={social.href}\r\n                  href={social.href}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"flex h-10 w-10 items-center justify-center rounded-full bg-white/10 transition-colors hover:bg-[#2D6A4F]\"\r\n                  aria-label={social.label}\r\n                >\r\n                  <social.icon className=\"h-4 w-4\" />\r\n                </a>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Links */}\r\n          <div>\r\n            <h3 className=\"mb-6 text-sm font-semibold uppercase tracking-wider\">\r\n              Quick Links\r\n            </h3>\r\n            <ul className=\"space-y-4\">\r\n              {quickLinks.map((link) => (\r\n                <li key={link.href}>\r\n                  <Link\r\n                    href={link.href}\r\n                    className=\"text-sm text-gray-300 transition-colors hover:text-white\"\r\n                  >\r\n                    {link.label}\r\n                  </Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Property Types */}\r\n          <div>\r\n            <h3 className=\"mb-6 text-sm font-semibold uppercase tracking-wider\">\r\n              Property Types\r\n            </h3>\r\n            <ul className=\"space-y-4\">\r\n              {propertyTypes.map((link) => (\r\n                <li key={link.href}>\r\n                  <Link\r\n                    href={link.href}\r\n                    className=\"text-sm text-gray-300 transition-colors hover:text-white\"\r\n                  >\r\n                    {link.label}\r\n                  </Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Contact & Newsletter */}\r\n          <div>\r\n            <h3 className=\"mb-6 text-sm font-semibold uppercase tracking-wider\">\r\n              Contact Us\r\n            </h3>\r\n            <ul className=\"space-y-4 text-sm text-gray-300\">\r\n              <li className=\"flex items-start gap-3\">\r\n                <MapPin className=\"h-5 w-5 flex-shrink-0 text-[#D4A373]\" />\r\n                <span>Westlands, Nairobi, Kenya</span>\r\n              </li>\r\n              <li className=\"flex items-center gap-3\">\r\n                <Phone className=\"h-5 w-5 flex-shrink-0 text-[#D4A373]\" />\r\n                <span>+254 700 000 000</span>\r\n              </li>\r\n              <li className=\"flex items-center gap-3\">\r\n                <Mail className=\"h-5 w-5 flex-shrink-0 text-[#D4A373]\" />\r\n                <span>info@verifiednyumba.co.ke</span>\r\n              </li>\r\n            </ul>\r\n\r\n            {/* Newsletter */}\r\n            <div className=\"mt-8\">\r\n              <h4 className=\"mb-4 text-sm font-semibold\">Newsletter</h4>\r\n              <form onSubmit={handleNewsletterSubmit} className=\"flex gap-2\">\r\n                <Input\r\n                  type=\"email\"\r\n                  placeholder=\"Your email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"bg-white/10 border-white/20 text-white placeholder:text-gray-400 focus:border-[#D4A373] focus:ring-[#D4A373]\"\r\n                  required\r\n                />\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"accent\"\r\n                  size=\"icon\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <Send className=\"h-4 w-4\" />\r\n                </Button>\r\n              </form>\r\n              {message && (\r\n                <p className=\"mt-2 text-sm text-green-400\">{message}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bottom bar */}\r\n      <div className=\"border-t border-white/10\">\r\n        <div className=\"container mx-auto px-4 py-6\">\r\n          <div className=\"flex flex-col items-center justify-between gap-4 md:flex-row\">\r\n            <p className=\"text-sm text-gray-400\">\r\n              &copy; {new Date().getFullYear()} VerifiedNyumba. All rights\r\n              reserved.\r\n            </p>\r\n            <div className=\"flex items-center gap-6 text-sm text-gray-400\">\r\n              <Link\r\n                href=\"/privacy\"\r\n                className=\"hover:text-white transition-colors\"\r\n              >\r\n                Privacy Policy\r\n              </Link>\r\n              <Link\r\n                href=\"/terms\"\r\n                className=\"hover:text-white transition-colors\"\r\n              >\r\n                Terms of Service\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\layout\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\maps\\LocationPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\maps\\MapView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\maps\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\checkbox.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useId\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":15,"column":28,"nodeType":"MemberExpression","endLine":15,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Checkbox component for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\";\r\nimport { Check } from \"lucide-react\";\r\nimport { cn } from \"@/app/lib/utils\";\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root> & {\r\n    label?: string;\r\n  }\r\n>(({ className, label, id, ...props }, ref) => {\r\n  const checkboxId = id || React.useId();\r\n\r\n  return (\r\n    <div className=\"flex items-center space-x-2\">\r\n      <CheckboxPrimitive.Root\r\n        ref={ref}\r\n        id={checkboxId}\r\n        className={cn(\r\n          \"peer h-4 w-4 shrink-0 rounded border border-gray-300 bg-white\",\r\n          \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2\",\r\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n          \"data-[state=checked]:bg-teal-600 data-[state=checked]:border-teal-600 data-[state=checked]:text-white\",\r\n          \"transition-colors duration-200\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <CheckboxPrimitive.Indicator\r\n          className={cn(\"flex items-center justify-center text-current\")}\r\n        >\r\n          <Check className=\"h-3 w-3\" />\r\n        </CheckboxPrimitive.Indicator>\r\n      </CheckboxPrimitive.Root>\r\n      {label && (\r\n        <label\r\n          htmlFor={checkboxId}\r\n          className=\"text-sm font-medium leading-none text-gray-700 peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\"\r\n        >\r\n          {label}\r\n        </label>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\r\n\r\nexport { Checkbox };\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\input.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useId\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":15,"column":27,"nodeType":"MemberExpression","endLine":15,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Input component for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/app/lib/utils\";\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  error?: string;\r\n  label?: string;\r\n}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, error, label, id, ...props }, ref) => {\r\n    const inputId = id || React.useId();\r\n\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label\r\n            htmlFor={inputId}\r\n            className=\"mb-1.5 block text-sm font-medium text-gray-700\"\r\n          >\r\n            {label}\r\n          </label>\r\n        )}\r\n        <input\r\n          type={type}\r\n          id={inputId}\r\n          className={cn(\r\n            \"flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400\",\r\n            \"focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20\",\r\n            \"disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500\",\r\n            \"transition-colors duration-200\",\r\n            error &&\r\n              \"border-red-500 focus:border-red-500 focus:ring-red-500/20\",\r\n            className\r\n          )}\r\n          ref={ref}\r\n          {...props}\r\n        />\r\n        {error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\r\n      </div>\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\components\\ui\\textarea.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useId\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":15,"column":30,"nodeType":"MemberExpression","endLine":15,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Textarea component for VerifiedNyumba\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/app/lib/utils\";\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {\r\n  error?: string;\r\n  label?: string;\r\n}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, error, label, id, ...props }, ref) => {\r\n    const textareaId = id || React.useId();\r\n\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label\r\n            htmlFor={textareaId}\r\n            className=\"mb-1.5 block text-sm font-medium text-gray-700\"\r\n          >\r\n            {label}\r\n          </label>\r\n        )}\r\n        <textarea\r\n          id={textareaId}\r\n          className={cn(\r\n            \"flex min-h-[100px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900\",\r\n            \"placeholder:text-gray-400 focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20\",\r\n            \"disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500\",\r\n            \"transition-colors duration-200 resize-y\",\r\n            error &&\r\n              \"border-red-500 focus:border-red-500 focus:ring-red-500/20\",\r\n            className\r\n          )}\r\n          ref={ref}\r\n          {...props}\r\n        />\r\n        {error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\r\n      </div>\r\n    );\r\n  }\r\n);\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\cloudinary.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\data\\featured-properties.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\data\\homepage-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\data\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\socket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\validations\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\Personal\\house-hunting-app\\app\\lib\\validations\\listing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
